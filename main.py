import streamlit as st
import pandas as pd
import plotly.express as px
import plotly.graph_objects as go
from datetime import datetime, timedelta

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
st.set_page_config(
    page_title="E-commerce Dashboard",
    page_icon="üìä",
    layout="wide"
)

st.title("üìä E-commerce Sales Dashboard")
st.markdown("–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–¥–∞–∂ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞")

# –°–æ–∑–¥–∞–µ–º –±–æ–∫–æ–≤—É—é –ø–∞–Ω–µ–ª—å —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
st.sidebar.title("üîß –§–∏–ª—å—Ç—Ä—ã")

# –§–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–µ
date_filter = st.sidebar.selectbox(
    "–ü–µ—Ä–∏–æ–¥",
    ["–í—Å–µ –≤—Ä–µ–º—è", "–ü–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π", "–ü–æ—Å–ª–µ–¥–Ω–∏–µ 90 –¥–Ω–µ–π", "–¢–µ–∫—É—â–∏–π –≥–æ–¥"]
)

# –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
category_filter = st.sidebar.selectbox(
    "–ö–∞—Ç–µ–≥–æ—Ä–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞",
    ["–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏", "Bikes", "Components", "Clothing", "Accessories"]
)

st.markdown("---")

# 1. –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
st.subheader("üìà –ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (KPI)")

col1, col2, col3, col4 = st.columns(4)

with col1:
    st.metric(
        label="–û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞",
        value="$1,234,567",
        delta="+12.5%"
    )

with col2:
    st.metric(
        label="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤",
        value="4,567",
        delta="+8.3%"
    )

with col3:
    st.metric(
        label="–°—Ä–µ–¥–Ω–∏–π —á–µ–∫",
        value="$270.45",
        delta="+5.2%"
    )

with col4:
    st.metric(
        label="–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤",
        value="2,345",
        delta="+15.7%"
    )

st.markdown("---")

# 2. –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö
st.subheader("üìÖ –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –æ –ø—Ä–æ–¥–∞–∂–∞—Ö")

# –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
sales_data = pd.DataFrame({
    '–ú–µ—Å—è—Ü': ['–Ø–Ω–≤–∞—Ä—å', '–§–µ–≤—Ä–∞–ª—å', '–ú–∞—Ä—Ç', '–ê–ø—Ä–µ–ª—å', '–ú–∞–π', '–ò—é–Ω—å'],
    '–ü—Ä–æ–¥–∞–∂–∏': [100000, 120000, 90000, 150000, 180000, 200000],
    '–ö–ª–∏–µ–Ω—Ç—ã': [500, 600, 450, 750, 900, 1000],
    '–°—Ä–µ–¥–Ω–∏–π —á–µ–∫': [200, 220, 210, 230, 240, 250]
})

# –î–∏–∞–≥—Ä–∞–º–º–∞ 1: –õ–∏–Ω–µ–π–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫
fig1 = px.line(sales_data, x='–ú–µ—Å—è—Ü', y='–ü—Ä–æ–¥–∞–∂–∏', 
               title='–î–∏–Ω–∞–º–∏–∫–∞ –ø—Ä–æ–¥–∞–∂ –ø–æ –º–µ—Å—è—Ü–∞–º',
               markers=True)
st.plotly_chart(fig1, use_container_width=True)

# –î–∏–∞–≥—Ä–∞–º–º–∞ 2: –°—Ç–æ–ª–±—á–∞—Ç–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞
fig2 = px.bar(sales_data, x='–ú–µ—Å—è—Ü', y='–ö–ª–∏–µ–Ω—Ç—ã',
              title='–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ –º–µ—Å—è—Ü–∞–º',
              color='–ö–ª–∏–µ–Ω—Ç—ã',
              color_continuous_scale='Blues')
st.plotly_chart(fig2, use_container_width=True)

# –î–∏–∞–≥—Ä–∞–º–º–∞ 3: –ö—Ä—É–≥–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞
category_data = pd.DataFrame({
    '–ö–∞—Ç–µ–≥–æ—Ä–∏—è': ['–°–º–∞—Ä—Ç—Ñ–æ–Ω—ã', '–ù–æ—É—Ç–±—É–∫–∏', '–ù–∞—É—à–Ω–∏–∫–∏', '–ü–ª–∞–Ω—à–µ—Ç—ã', '–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã'],
    '–ü—Ä–æ–¥–∞–∂–∏': [35, 25, 20, 15, 5]
})
fig3 = px.pie(category_data, values='–ü—Ä–æ–¥–∞–∂–∏', names='–ö–∞—Ç–µ–≥–æ—Ä–∏—è',
              title='–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–∂ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º',
              hole=0.4)
st.plotly_chart(fig3, use_container_width=True)

# –î–∏–∞–≥—Ä–∞–º–º–∞ 4: –¢–æ—á–µ—á–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞
fig4 = px.scatter(sales_data, x='–ö–ª–∏–µ–Ω—Ç—ã', y='–ü—Ä–æ–¥–∞–∂–∏',
                  size='–°—Ä–µ–¥–Ω–∏–π —á–µ–∫', color='–ú–µ—Å—è—Ü',
                  title='–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –ø—Ä–æ–¥–∞–∂ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤',
                  labels={'–ö–ª–∏–µ–Ω—Ç—ã': '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–µ–Ω—Ç–æ–≤', '–ü—Ä–æ–¥–∞–∂–∏': '–û–±—ä–µ–º –ø—Ä–æ–¥–∞–∂ ($)'})
st.plotly_chart(fig4, use_container_width=True)

# 3. –¢–∞–±–ª–∏—Ü–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
with st.expander("üìã –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö"):
    st.dataframe(sales_data)
    st.write(f"–í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π: {len(sales_data)}")

st.markdown("---")
st.markdown("**üéØ –ö—É—Ä—Å–æ–≤–æ–π –ø—Ä–æ–µ–∫—Ç –ø–æ –∞–Ω–∞–ª–∏–∑—É –¥–∞–Ω–Ω—ã—Ö**")
st.markdown("üë©‚Äçüíª –ê–≤—Ç–æ—Ä: [–í–∞—à–µ –ò–º—è]")
# Updated via GitHub


